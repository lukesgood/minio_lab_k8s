# Lab 5: ÏÑ±Îä• ÌÖåÏä§Ìä∏ - Lab Guide

## üìö ÌïôÏäµ Î™©Ìëú

Ïù¥ Ïã§ÏäµÏóêÏÑúÎäî MinIOÏùò ÏÑ±Îä• ÌäπÏÑ±ÏùÑ Ï≤¥Í≥ÑÏ†ÅÏúºÎ°ú Ï∏°Ï†ïÌïòÍ≥† Î∂ÑÏÑùÌï©ÎãàÎã§:

- **Ï≤òÎ¶¨Îüâ Ï∏°Ï†ï**: ÏóÖÎ°úÎìú/Îã§Ïö¥Î°úÎìú ÏÜçÎèÑ Î∂ÑÏÑù
- **ÎèôÏãú Ïó∞Í≤∞ ÌÖåÏä§Ìä∏**: Î≥ëÎ†¨ Ï≤òÎ¶¨ ÏÑ±Îä• ÌôïÏù∏
- **ÌååÏùº ÌÅ¨Í∏∞Î≥Ñ ÏÑ±Îä•**: Îã§ÏñëÌïú ÌÅ¨Í∏∞Ïùò ÌååÏùº Ï≤òÎ¶¨ ÌäπÏÑ±
- **Î≥ëÎ™© ÏßÄÏ†ê Î∂ÑÏÑù**: ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ Î™®ÎãàÌÑ∞ÎßÅ
- **ÏÑ±Îä• ÏµúÏ†ÅÌôî**: ÏÑ§Ï†ï ÌäúÎãùÏùÑ ÌÜµÌïú ÏÑ±Îä• Í∞úÏÑ†

## üéØ ÌïµÏã¨ Í∞úÎÖê

### ÏÑ±Îä• Ï∏°Ï†ï ÏßÄÌëú

| ÏßÄÌëú | ÏÑ§Î™Ö | Îã®ÏúÑ |
|------|------|------|
| **Throughput** | Îã®ÏúÑ ÏãúÍ∞ÑÎãπ Ï≤òÎ¶¨Îüâ | MB/s, GB/s |
| **IOPS** | Ï¥àÎãπ ÏûÖÏ∂úÎ†• ÏûëÏóÖ Ïàò | ops/sec |
| **Latency** | ÏöîÏ≤≠-ÏùëÎãµ ÏßÄÏó∞ÏãúÍ∞Ñ | ms, seconds |
| **Concurrency** | ÎèôÏãú Ï≤òÎ¶¨ Í∞ÄÎä• Ïó∞Í≤∞ Ïàò | connections |
| **CPU Usage** | CPU ÏÇ¨Ïö©Î•† | % |
| **Memory Usage** | Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Îüâ | MB, GB |

### ÏÑ±Îä•Ïóê ÏòÅÌñ•ÏùÑ Ï£ºÎäî ÏöîÏÜå
- **ÎÑ§Ìä∏ÏõåÌÅ¨ ÎåÄÏó≠Ìè≠**: ÌÅ¥Îü¨Ïä§ÌÑ∞ ÎÇ¥/Ïô∏Î∂Ä ÌÜµÏã† ÏÜçÎèÑ
- **Ïä§ÌÜ†Î¶¨ÏßÄ I/O**: ÎîîÏä§ÌÅ¨ ÏùΩÍ∏∞/Ïì∞Í∏∞ ÏÑ±Îä•
- **CPU ÏÑ±Îä•**: ÏïîÌò∏Ìôî, ÏïïÏ∂ï Îì± Ïó∞ÏÇ∞ Ï≤òÎ¶¨
- **Î©îÎ™®Î¶¨**: Î≤ÑÌçºÎßÅ Î∞è Ï∫êÏã± Ìö®Ïú®ÏÑ±
- **ÎèôÏãú Ïó∞Í≤∞ Ïàò**: Î≥ëÎ†¨ Ï≤òÎ¶¨ ÏµúÏ†ÅÌôî

## üöÄ Ïã§Ïäµ ÏãúÏûë

### 1Îã®Í≥Ñ: ÏÑ±Îä• ÌÖåÏä§Ìä∏ ÌôòÍ≤Ω Ï§ÄÎπÑ

#### ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ ÌôïÏù∏

```bash
# ÌòÑÏû¨ ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ ÏÉÅÌÉú ÌôïÏù∏
echo "=== ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ ÌòÑÌô© ==="
echo "CPU Ï†ïÎ≥¥:"
nproc
cat /proc/cpuinfo | grep "model name" | head -1

echo -e "\nÎ©îÎ™®Î¶¨ Ï†ïÎ≥¥:"
free -h

echo -e "\nÎîîÏä§ÌÅ¨ Ï†ïÎ≥¥:"
df -h

echo -e "\nÎÑ§Ìä∏ÏõåÌÅ¨ Ïù∏ÌÑ∞ÌéòÏù¥Ïä§:"
ip addr show | grep -E "inet.*scope global"
```

#### MinIO ÌÅ¥Îü¨Ïä§ÌÑ∞ ÏÉÅÌÉú ÌôïÏù∏

```bash
# MinIO ÏÑúÎπÑÏä§ ÏÉÅÌÉú
kubectl get pods -n minio-tenant -o wide

# MinIO Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ
kubectl top pods -n minio-tenant 2>/dev/null || echo "metrics-serverÍ∞Ä ÏÑ§ÏπòÎêòÏßÄ ÏïäÏùå"

# Ìè¨Ìä∏ Ìè¨ÏõåÎî© ÌôïÏù∏
kubectl port-forward svc/minio -n minio-tenant 9000:80 &
sleep 2
```

#### ÌÖåÏä§Ìä∏ ÎîîÎ†âÌÜ†Î¶¨ Î∞è ÎèÑÍµ¨ Ï§ÄÎπÑ

```bash
# ÏÑ±Îä• ÌÖåÏä§Ìä∏ ÎîîÎ†âÌÜ†Î¶¨ ÏÉùÏÑ±
mkdir -p performance-test
cd performance-test

# ÌÖåÏä§Ìä∏ Í≤∞Í≥º Ï†ÄÏû• ÎîîÎ†âÌÜ†Î¶¨
mkdir -p results logs

# ÏãúÍ∞Ñ Ï∏°Ï†ï Ìï®Ïàò Ï†ïÏùò
measure_time() {
    local command="$1"
    local description="$2"
    echo "ÏãúÏûë: $description"
    start_time=$(date +%s.%N)
    eval "$command"
    end_time=$(date +%s.%N)
    duration=$(echo "$end_time - $start_time" | bc -l)
    echo "ÏôÑÎ£å: $description - ÏÜåÏöîÏãúÍ∞Ñ: ${duration}Ï¥à"
    echo "$description,$duration" >> results/timing_results.csv
}
```

### 2Îã®Í≥Ñ: Í∏∞Î≥∏ ÏÑ±Îä• Ï∏°Ï†ï

#### Îã§ÏñëÌïú ÌÅ¨Í∏∞Ïùò ÌÖåÏä§Ìä∏ ÌååÏùº ÏÉùÏÑ±

```bash
echo "=== ÌÖåÏä§Ìä∏ ÌååÏùº ÏÉùÏÑ± ==="

# ÏûëÏùÄ ÌååÏùºÎì§ (1KB - 1MB)
dd if=/dev/zero of=file_1kb.dat bs=1K count=1 2>/dev/null
dd if=/dev/zero of=file_100kb.dat bs=100K count=1 2>/dev/null
dd if=/dev/zero of=file_1mb.dat bs=1M count=1 2>/dev/null

# Ï§ëÍ∞Ñ ÌååÏùºÎì§ (10MB - 100MB)
dd if=/dev/zero of=file_10mb.dat bs=1M count=10 2>/dev/null
dd if=/dev/zero of=file_50mb.dat bs=1M count=50 2>/dev/null
dd if=/dev/zero of=file_100mb.dat bs=1M count=100 2>/dev/null

# ÌÅ∞ ÌååÏùºÎì§ (500MB - 1GB)
dd if=/dev/zero of=file_500mb.dat bs=1M count=500 2>/dev/null
dd if=/dev/zero of=file_1gb.dat bs=1M count=1024 2>/dev/null

# ÌååÏùº ÌÅ¨Í∏∞ ÌôïÏù∏
echo -e "\nÏÉùÏÑ±Îêú ÌÖåÏä§Ìä∏ ÌååÏùº:"
ls -lh *.dat

# üìã ÏòàÏÉÅ Í≤∞Í≥º:
# -rw-rw-r-- 1 user user 1.0K Aug 11 01:40 file_1kb.dat
# -rw-rw-r-- 1 user user 100K Aug 11 01:40 file_100kb.dat
# -rw-rw-r-- 1 user user 1.0M Aug 11 01:40 file_1mb.dat
# -rw-rw-r-- 1 user user  10M Aug 11 01:40 file_10mb.dat
# -rw-rw-r-- 1 user user  50M Aug 11 01:40 file_50mb.dat
# -rw-rw-r-- 1 user user 100M Aug 11 01:40 file_100mb.dat
# -rw-rw-r-- 1 user user 500M Aug 11 01:40 file_500mb.dat
# -rw-rw-r-- 1 user user 1.0G Aug 11 01:40 file_1gb.dat
# 
# üí° ÏÑ§Î™Ö:
# - dd Î™ÖÎ†πÏúºÎ°ú Îã§ÏñëÌïú ÌÅ¨Í∏∞Ïùò ÌÖåÏä§Ìä∏ ÌååÏùº ÏÉùÏÑ±
# - /dev/zeroÎ•º ÏÇ¨Ïö©ÌïòÏó¨ Îπ†Î•∏ ÌååÏùº ÏÉùÏÑ±
# - ÌååÏùº ÌÅ¨Í∏∞Î≥Ñ ÏÑ±Îä• ÌäπÏÑ± Î∂ÑÏÑùÏùÑ ÏúÑÌïú Ï§ÄÎπÑ
```

#### Îã®Ïùº ÌååÏùº ÏóÖÎ°úÎìú ÏÑ±Îä• ÌÖåÏä§Ìä∏

```bash
echo "=== Îã®Ïùº ÌååÏùº ÏóÖÎ°úÎìú ÏÑ±Îä• ÌÖåÏä§Ìä∏ ==="

# CSV Ìó§Îçî ÏÉùÏÑ±
echo "Test,Duration(seconds)" > results/timing_results.csv

# Í∞Å ÌååÏùº ÌÅ¨Í∏∞Î≥Ñ ÏóÖÎ°úÎìú ÌÖåÏä§Ìä∏
for file in file_*.dat; do
    size=$(echo $file | sed 's/file_//;s/.dat//')
    measure_time "mc cp $file local/test-bucket/perf_$file" "Upload_$size"
done

echo -e "\nÏóÖÎ°úÎìú ÏÑ±Îä• Í≤∞Í≥º:"
cat results/timing_results.csv

# üìã ÏòàÏÉÅ Í≤∞Í≥º:
# Test,Duration(seconds)
# Upload_1kb,0.156
# Upload_100kb,0.234
# Upload_1mb,0.445
# Upload_10mb,1.234
# Upload_50mb,4.567
# Upload_100mb,8.901
# Upload_500mb,35.678
# Upload_1gb,68.234
# 
# üí° ÏÑ§Î™Ö:
# - ÌååÏùº ÌÅ¨Í∏∞Í∞Ä ÌÅ¥ÏàòÎ°ù ÏóÖÎ°úÎìú ÏãúÍ∞Ñ Ï¶ùÍ∞Ä
# - 100MB Ïù¥ÏÉÅÏóêÏÑú Multipart Upload ÏûêÎèô ÌôúÏÑ±Ìôî
# - ÎÑ§Ìä∏ÏõåÌÅ¨ ÎåÄÏó≠Ìè≠Í≥º ÎîîÏä§ÌÅ¨ I/OÍ∞Ä Ï£ºÏöî Î≥ëÎ™©
```

#### Îã®Ïùº ÌååÏùº Îã§Ïö¥Î°úÎìú ÏÑ±Îä• ÌÖåÏä§Ìä∏

```bash
echo "=== Îã®Ïùº ÌååÏùº Îã§Ïö¥Î°úÎìú ÏÑ±Îä• ÌÖåÏä§Ìä∏ ==="

# Îã§Ïö¥Î°úÎìú ÎîîÎ†âÌÜ†Î¶¨ ÏÉùÏÑ±
mkdir -p downloads

# Í∞Å ÌååÏùº ÌÅ¨Í∏∞Î≥Ñ Îã§Ïö¥Î°úÎìú ÌÖåÏä§Ìä∏
for file in file_*.dat; do
    size=$(echo $file | sed 's/file_//;s/.dat//')
    measure_time "mc cp local/test-bucket/perf_$file downloads/downloaded_$file" "Download_$size"
done

echo -e "\nÎã§Ïö¥Î°úÎìú ÏÑ±Îä• Í≤∞Í≥º:"
tail -n +1 results/timing_results.csv | grep Download

# üìã ÏòàÏÉÅ Í≤∞Í≥º:
# Download_1kb,0.089
# Download_100kb,0.123
# Download_1mb,0.234
# Download_10mb,0.789
# Download_50mb,2.345
# Download_100mb,4.567
# Download_500mb,18.901
# Download_1gb,35.678
# 
# üí° ÏÑ§Î™Ö:
# - Îã§Ïö¥Î°úÎìúÍ∞Ä ÏóÖÎ°úÎìúÎ≥¥Îã§ ÏùºÎ∞òÏ†ÅÏúºÎ°ú Îπ†Î¶Ñ
# - Ï∫êÏã± Ìö®Í≥ºÎ°ú Ïù∏Ìïú ÏÑ±Îä• Ìñ•ÏÉÅ Í∞ÄÎä•
# - ÎÑ§Ìä∏ÏõåÌÅ¨ ÎåÄÏó≠Ìè≠Ïù¥ Ï£ºÏöî Ï†úÌïú ÏöîÏÜå
```

### 3Îã®Í≥Ñ: Ï≤òÎ¶¨Îüâ Í≥ÑÏÇ∞ Î∞è Î∂ÑÏÑù

#### Ï≤òÎ¶¨Îüâ Í≥ÑÏÇ∞ Ïä§ÌÅ¨Î¶ΩÌä∏

```bash
# Ï≤òÎ¶¨Îüâ Í≥ÑÏÇ∞ Ïä§ÌÅ¨Î¶ΩÌä∏ ÏÉùÏÑ±
cat > calculate_throughput.py << 'EOF'
#!/usr/bin/env python3
import csv
import os

def get_file_size(filename):
    """ÌååÏùº ÌÅ¨Í∏∞Î•º Î∞îÏù¥Ìä∏ Îã®ÏúÑÎ°ú Î∞òÌôò"""
    size_map = {
        '1kb': 1024,
        '100kb': 100 * 1024,
        '1mb': 1024 * 1024,
        '10mb': 10 * 1024 * 1024,
        '50mb': 50 * 1024 * 1024,
        '100mb': 100 * 1024 * 1024,
        '500mb': 500 * 1024 * 1024,
        '1gb': 1024 * 1024 * 1024
    }
    return size_map.get(filename.lower(), 0)

def calculate_throughput():
    """Ï≤òÎ¶¨Îüâ Í≥ÑÏÇ∞ Î∞è Í≤∞Í≥º Ï∂úÎ†•"""
    print("=== Ï≤òÎ¶¨Îüâ Î∂ÑÏÑù Í≤∞Í≥º ===")
    print(f"{'ÌååÏùº ÌÅ¨Í∏∞':<10} {'ÏóÖÎ°úÎìú(MB/s)':<15} {'Îã§Ïö¥Î°úÎìú(MB/s)':<15}")
    print("-" * 45)
    
    upload_results = {}
    download_results = {}
    
    # CSV ÌååÏùº ÏùΩÍ∏∞
    with open('results/timing_results.csv', 'r') as f:
        reader = csv.reader(f)
        next(reader)  # Ìó§Îçî Ïä§ÌÇµ
        
        for row in reader:
            test_name, duration = row[0], float(row[1])
            
            if test_name.startswith('Upload_'):
                size_name = test_name.replace('Upload_', '')
                upload_results[size_name] = duration
            elif test_name.startswith('Download_'):
                size_name = test_name.replace('Download_', '')
                download_results[size_name] = duration
    
    # Ï≤òÎ¶¨Îüâ Í≥ÑÏÇ∞ Î∞è Ï∂úÎ†•
    for size_name in ['1kb', '100kb', '1mb', '10mb', '50mb', '100mb', '500mb', '1gb']:
        file_size_bytes = get_file_size(size_name)
        file_size_mb = file_size_bytes / (1024 * 1024)
        
        upload_throughput = file_size_mb / upload_results.get(size_name, 1) if size_name in upload_results else 0
        download_throughput = file_size_mb / download_results.get(size_name, 1) if size_name in download_results else 0
        
        print(f"{size_name:<10} {upload_throughput:<15.2f} {download_throughput:<15.2f}")

if __name__ == "__main__":
    calculate_throughput()
EOF

python3 calculate_throughput.py
```

### 4Îã®Í≥Ñ: ÎèôÏãú Ïó∞Í≤∞ ÏÑ±Îä• ÌÖåÏä§Ìä∏

#### Î≥ëÎ†¨ ÏóÖÎ°úÎìú ÌÖåÏä§Ìä∏

```bash
echo "=== Î≥ëÎ†¨ ÏóÖÎ°úÎìú ÏÑ±Îä• ÌÖåÏä§Ìä∏ ==="

# Î≥ëÎ†¨ ÌÖåÏä§Ìä∏Ïö© ÌååÏùº ÏÉùÏÑ±
for i in {1..10}; do
    dd if=/dev/zero of=parallel_${i}.dat bs=1M count=10 2>/dev/null
done

# ÏàúÏ∞® ÏóÖÎ°úÎìú ÏãúÍ∞Ñ Ï∏°Ï†ï
echo "ÏàúÏ∞® ÏóÖÎ°úÎìú ÌÖåÏä§Ìä∏..."
start_time=$(date +%s.%N)
for i in {1..10}; do
    mc cp parallel_${i}.dat local/test-bucket/sequential_${i}.dat >/dev/null 2>&1
done
end_time=$(date +%s.%N)
sequential_time=$(echo "$end_time - $start_time" | bc -l)
echo "ÏàúÏ∞® ÏóÖÎ°úÎìú ÏãúÍ∞Ñ: ${sequential_time}Ï¥à"

# Î≥ëÎ†¨ ÏóÖÎ°úÎìú ÏãúÍ∞Ñ Ï∏°Ï†ï
echo "Î≥ëÎ†¨ ÏóÖÎ°úÎìú ÌÖåÏä§Ìä∏..."
start_time=$(date +%s.%N)
for i in {1..10}; do
    mc cp parallel_${i}.dat local/test-bucket/parallel_${i}.dat >/dev/null 2>&1 &
done
wait  # Î™®Îì† Î∞±Í∑∏ÎùºÏö¥Îìú ÏûëÏóÖ ÏôÑÎ£å ÎåÄÍ∏∞
end_time=$(date +%s.%N)
parallel_time=$(echo "$end_time - $start_time" | bc -l)
echo "Î≥ëÎ†¨ ÏóÖÎ°úÎìú ÏãúÍ∞Ñ: ${parallel_time}Ï¥à"

# ÏÑ±Îä• Í∞úÏÑ† Í≥ÑÏÇ∞
improvement=$(echo "scale=2; ($sequential_time - $parallel_time) / $sequential_time * 100" | bc -l)
echo "Î≥ëÎ†¨ Ï≤òÎ¶¨ ÏÑ±Îä• Í∞úÏÑ†: ${improvement}%"
```

#### ÎèôÏãú Ïó∞Í≤∞ Ïàò ÌÖåÏä§Ìä∏

```bash
echo "=== ÎèôÏãú Ïó∞Í≤∞ Ïàò ÌÖåÏä§Ìä∏ ==="

# Îã§ÏñëÌïú ÎèôÏãú Ïó∞Í≤∞ ÏàòÎ°ú ÌÖåÏä§Ìä∏
for concurrent in 1 5 10 20; do
    echo "ÎèôÏãú Ïó∞Í≤∞ Ïàò: $concurrent"
    
    # ÌÖåÏä§Ìä∏ ÌååÏùº Ï§ÄÎπÑ
    for i in $(seq 1 $concurrent); do
        dd if=/dev/zero of=concurrent_${concurrent}_${i}.dat bs=1M count=5 2>/dev/null
    done
    
    # ÎèôÏãú ÏóÖÎ°úÎìú ÌÖåÏä§Ìä∏
    start_time=$(date +%s.%N)
    for i in $(seq 1 $concurrent); do
        mc cp concurrent_${concurrent}_${i}.dat local/test-bucket/concurrent_${concurrent}_${i}.dat >/dev/null 2>&1 &
    done
    wait
    end_time=$(date +%s.%N)
    duration=$(echo "$end_time - $start_time" | bc -l)
    
    total_size=$(echo "$concurrent * 5" | bc)  # MB
    throughput=$(echo "scale=2; $total_size / $duration" | bc -l)
    
    echo "  - Ï¥ù ÌÅ¨Í∏∞: ${total_size}MB"
    echo "  - ÏÜåÏöî ÏãúÍ∞Ñ: ${duration}Ï¥à"
    echo "  - Ï≤òÎ¶¨Îüâ: ${throughput}MB/s"
    echo ""
done
```

### 5Îã®Í≥Ñ: ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ Î™®ÎãàÌÑ∞ÎßÅ

#### Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ Î™®ÎãàÌÑ∞ÎßÅ Ïä§ÌÅ¨Î¶ΩÌä∏

```bash
# Î™®ÎãàÌÑ∞ÎßÅ Ïä§ÌÅ¨Î¶ΩÌä∏ ÏÉùÏÑ±
cat > monitor_resources.sh << 'EOF'
#!/bin/bash

echo "=== ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ Î™®ÎãàÌÑ∞ÎßÅ ==="
echo "ÏãúÍ∞Ñ,CPUÏÇ¨Ïö©Î•†,Î©îÎ™®Î¶¨ÏÇ¨Ïö©Î•†,ÎîîÏä§ÌÅ¨I/O" > results/resource_usage.csv

# Î∞±Í∑∏ÎùºÏö¥ÎìúÏóêÏÑú Î¶¨ÏÜåÏä§ Î™®ÎãàÌÑ∞ÎßÅ
monitor_resources() {
    while true; do
        timestamp=$(date '+%H:%M:%S')
        cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | sed 's/%us,//')
        mem_usage=$(free | grep Mem | awk '{printf "%.1f", $3/$2 * 100.0}')
        disk_io=$(iostat -d 1 1 2>/dev/null | tail -n +4 | awk 'NR==1{print $4+$5}' || echo "N/A")
        
        echo "$timestamp,$cpu_usage,$mem_usage,$disk_io" >> results/resource_usage.csv
        sleep 5
    done
}

# Î™®ÎãàÌÑ∞ÎßÅ ÏãúÏûë
monitor_resources &
MONITOR_PID=$!

echo "Î¶¨ÏÜåÏä§ Î™®ÎãàÌÑ∞ÎßÅ ÏãúÏûëÎê® (PID: $MONITOR_PID)"
echo "ÎåÄÏö©Îüâ ÌååÏùº ÏóÖÎ°úÎìú Ï§ë Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©ÎüâÏùÑ Î™®ÎãàÌÑ∞ÎßÅÌï©ÎãàÎã§..."

# ÎåÄÏö©Îüâ ÌååÏùº ÏóÖÎ°úÎìú (Î™®ÎãàÌÑ∞ÎßÅ ÎåÄÏÉÅ)
dd if=/dev/zero of=monitoring_test.dat bs=1M count=1000 2>/dev/null
mc cp monitoring_test.dat local/test-bucket/monitoring_test.dat

# Î™®ÎãàÌÑ∞ÎßÅ Ï§ëÏßÄ
kill $MONITOR_PID 2>/dev/null
wait $MONITOR_PID 2>/dev/null

echo "Î¶¨ÏÜåÏä§ Î™®ÎãàÌÑ∞ÎßÅ ÏôÑÎ£å"
echo "Í≤∞Í≥ºÎäî results/resource_usage.csvÏóêÏÑú ÌôïÏù∏ Í∞ÄÎä•Ìï©ÎãàÎã§."
EOF

chmod +x monitor_resources.sh
./monitor_resources.sh
```

### 6Îã®Í≥Ñ: MinIO ÏÑúÎ≤Ñ ÏÑ±Îä• Î©îÌä∏Î¶≠

#### MinIO ÎÇ¥Î∂Ä Î©îÌä∏Î¶≠ ÌôïÏù∏

```bash
echo "=== MinIO ÏÑúÎ≤Ñ Î©îÌä∏Î¶≠ ==="

# MinIO ÏÑúÎ≤Ñ Ï†ïÎ≥¥
mc admin info local

# ÏÑúÎ≤Ñ ÏÑ±Îä• ÌÜµÍ≥Ñ
mc admin prometheus metrics local > results/minio_metrics.txt

# Ï£ºÏöî Î©îÌä∏Î¶≠ Ï∂îÏ∂ú
echo "Ï£ºÏöî ÏÑ±Îä• Î©îÌä∏Î¶≠:"
grep -E "(minio_http_requests_total|minio_s3_requests_total|minio_network)" results/minio_metrics.txt | head -10
```

#### Ïã§ÏãúÍ∞Ñ ÏÑ±Îä• Î™®ÎãàÌÑ∞ÎßÅ

```bash
# Ïã§ÏãúÍ∞Ñ API Ìò∏Ï∂ú Ï∂îÏ†Å (Î≥ÑÎèÑ ÌÑ∞ÎØ∏ÎÑêÏóêÏÑú Ïã§Ìñâ Í∂åÏû•)
echo "Ïã§ÏãúÍ∞Ñ API Ìò∏Ï∂ú Ï∂îÏ†ÅÏùÑ ÏãúÏûëÌï©ÎãàÎã§..."
echo "Îã§Î•∏ ÌÑ∞ÎØ∏ÎÑêÏóêÏÑú Îã§Ïùå Î™ÖÎ†πÏùÑ Ïã§ÌñâÌïòÏÑ∏Ïöî:"
echo "mc admin trace local --verbose"

# ÌÖåÏä§Ìä∏ Ìä∏ÎûòÌîΩ ÏÉùÏÑ±
echo "ÌÖåÏä§Ìä∏ Ìä∏ÎûòÌîΩ ÏÉùÏÑ± Ï§ë..."
for i in {1..5}; do
    mc cp file_10mb.dat local/test-bucket/trace_test_${i}.dat >/dev/null 2>&1
    mc cp local/test-bucket/trace_test_${i}.dat downloads/trace_downloaded_${i}.dat >/dev/null 2>&1
done
```

### 7Îã®Í≥Ñ: ÏÑ±Îä• ÏµúÏ†ÅÌôî ÌÖåÏä§Ìä∏

#### Îã§ÏñëÌïú ÏÑ§Ï†ïÏúºÎ°ú ÏÑ±Îä• ÎπÑÍµê

```bash
echo "=== ÏÑ±Îä• ÏµúÏ†ÅÌôî ÌÖåÏä§Ìä∏ ==="

# ÌòÑÏû¨ MinIO ÏÑ§Ï†ï ÌôïÏù∏
echo "ÌòÑÏû¨ MinIO API ÏÑ§Ï†ï:"
mc admin config get local api

# Î©ÄÌã∞ÌååÌä∏ ÏóÖÎ°úÎìú ÏûÑÍ≥ÑÍ∞í ÌôïÏù∏
echo -e "\nÌòÑÏû¨ Î©ÄÌã∞ÌååÌä∏ ÏÑ§Ï†ï:"
mc admin config get local api | grep -E "(multipart_size|max_parts_count)"

# Îã§ÏñëÌïú Ï≤≠ÌÅ¨ ÌÅ¨Í∏∞Î°ú ÏóÖÎ°úÎìú ÌÖåÏä§Ìä∏
echo -e "\nÏ≤≠ÌÅ¨ ÌÅ¨Í∏∞Î≥Ñ ÏÑ±Îä• ÌÖåÏä§Ìä∏:"
for chunk_size in 5 16 32 64; do
    echo "Ï≤≠ÌÅ¨ ÌÅ¨Í∏∞: ${chunk_size}MB"
    
    # ÌÖåÏä§Ìä∏ ÌååÏùº ÏÉùÏÑ±
    dd if=/dev/zero of=chunk_test_${chunk_size}mb.dat bs=1M count=200 2>/dev/null
    
    # ÏóÖÎ°úÎìú ÏãúÍ∞Ñ Ï∏°Ï†ï
    start_time=$(date +%s.%N)
    mc cp chunk_test_${chunk_size}mb.dat local/test-bucket/chunk_test_${chunk_size}mb.dat
    end_time=$(date +%s.%N)
    duration=$(echo "$end_time - $start_time" | bc -l)
    throughput=$(echo "scale=2; 200 / $duration" | bc -l)
    
    echo "  - ÏÜåÏöî ÏãúÍ∞Ñ: ${duration}Ï¥à"
    echo "  - Ï≤òÎ¶¨Îüâ: ${throughput}MB/s"
    echo ""
done
```

### 8Îã®Í≥Ñ: ÏÑ±Îä• ÌÖåÏä§Ìä∏ Í≤∞Í≥º Î∂ÑÏÑù

#### Ï¢ÖÌï© ÏÑ±Îä• Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±

```bash
# ÏÑ±Îä• Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±
cat > generate_report.py << 'EOF'
#!/usr/bin/env python3
import csv
import os
from datetime import datetime

def generate_performance_report():
    """ÏÑ±Îä• ÌÖåÏä§Ìä∏ Ï¢ÖÌï© Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±"""
    
    report = f"""
# MinIO ÏÑ±Îä• ÌÖåÏä§Ìä∏ Î¶¨Ìè¨Ìä∏
ÏÉùÏÑ± ÏãúÍ∞Ñ: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}

## ÌÖåÏä§Ìä∏ ÌôòÍ≤Ω
- ÏãúÏä§ÌÖú: {os.uname().sysname} {os.uname().release}
- ÏïÑÌÇ§ÌÖçÏ≤ò: {os.uname().machine}

## ÏÑ±Îä• ÌÖåÏä§Ìä∏ Í≤∞Í≥º

### 1. ÌååÏùº ÌÅ¨Í∏∞Î≥Ñ ÏÑ±Îä•
"""
    
    # ÌÉÄÏù¥Î∞ç Í≤∞Í≥º Î∂ÑÏÑù
    if os.path.exists('results/timing_results.csv'):
        with open('results/timing_results.csv', 'r') as f:
            reader = csv.reader(f)
            next(reader)  # Ìó§Îçî Ïä§ÌÇµ
            
            upload_times = {}
            download_times = {}
            
            for row in reader:
                test_name, duration = row[0], float(row[1])
                if test_name.startswith('Upload_'):
                    size = test_name.replace('Upload_', '')
                    upload_times[size] = duration
                elif test_name.startswith('Download_'):
                    size = test_name.replace('Download_', '')
                    download_times[size] = duration
            
            report += "\n| ÌååÏùº ÌÅ¨Í∏∞ | ÏóÖÎ°úÎìú ÏãúÍ∞Ñ(Ï¥à) | Îã§Ïö¥Î°úÎìú ÏãúÍ∞Ñ(Ï¥à) |\n"
            report += "|-----------|----------------|------------------|\n"
            
            for size in ['1kb', '100kb', '1mb', '10mb', '50mb', '100mb', '500mb', '1gb']:
                upload_time = upload_times.get(size, 'N/A')
                download_time = download_times.get(size, 'N/A')
                report += f"| {size} | {upload_time} | {download_time} |\n"
    
    report += """
### 2. ÏÑ±Îä• ÏµúÏ†ÅÌôî Í∂åÏû•ÏÇ¨Ìï≠

1. **ÌååÏùº ÌÅ¨Í∏∞Î≥Ñ ÏµúÏ†ÅÌôî**
   - 100MB Ïù¥ÏÉÅ: Multipart Upload ÏûêÎèô ÌôúÏÑ±Ìôî
   - 1GB Ïù¥ÏÉÅ: Ï≤≠ÌÅ¨ ÌÅ¨Í∏∞ 32MB Ïù¥ÏÉÅ Í∂åÏû•

2. **ÎèôÏãú Ïó∞Í≤∞ ÏµúÏ†ÅÌôî**
   - Îã®Ïùº ÎÖ∏Îìú: 5-10Í∞ú ÎèôÏãú Ïó∞Í≤∞ Í∂åÏû•
   - Îã§Ï§ë ÎÖ∏Îìú: ÎÖ∏ÎìúÎãπ 10-20Í∞ú ÎèôÏãú Ïó∞Í≤∞ Í∂åÏû•

3. **ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ ÏµúÏ†ÅÌôî**
   - CPU: Î©ÄÌã∞ÏΩîÏñ¥ ÌôúÏö©ÏùÑ ÏúÑÌïú Î≥ëÎ†¨ Ï≤òÎ¶¨
   - Î©îÎ™®Î¶¨: Î≤ÑÌçºÎßÅÏùÑ ÏúÑÌïú Ï∂©Î∂ÑÌïú RAM ÌôïÎ≥¥
   - Ïä§ÌÜ†Î¶¨ÏßÄ: SSD ÏÇ¨Ïö© Í∂åÏû•

### 3. Î≥ëÎ™© ÏßÄÏ†ê Î∂ÑÏÑù

Ï£ºÏöî Î≥ëÎ™© ÏßÄÏ†ê:
- ÎÑ§Ìä∏ÏõåÌÅ¨ I/O: ÌÅ¥Îü¨Ïä§ÌÑ∞ ÎÇ¥Î∂Ä ÌÜµÏã†
- ÎîîÏä§ÌÅ¨ I/O: Ïä§ÌÜ†Î¶¨ÏßÄ ÏùΩÍ∏∞/Ïì∞Í∏∞ ÏÑ±Îä•
- CPU: ÏïîÌò∏Ìôî Î∞è Ï≤¥ÌÅ¨ÏÑ¨ Í≥ÑÏÇ∞

### 4. Î™®ÎãàÌÑ∞ÎßÅ Í∂åÏû•ÏÇ¨Ìï≠

Ï†ïÍ∏∞Ï†ÅÏúºÎ°ú Î™®ÎãàÌÑ∞ÎßÅÌï¥Ïïº Ìï† ÏßÄÌëú:
- Ï≤òÎ¶¨Îüâ (MB/s)
- ÏùëÎãµ ÏãúÍ∞Ñ (ms)
- ÏóêÎü¨Ïú® (%)
- Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Î•† (CPU, Memory, Disk)
"""
    
    # Î¶¨Ìè¨Ìä∏ Ï†ÄÏû•
    with open('results/performance_report.md', 'w') as f:
        f.write(report)
    
    print("ÏÑ±Îä• Î¶¨Ìè¨Ìä∏Í∞Ä results/performance_report.mdÏóê Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.")

if __name__ == "__main__":
    generate_performance_report()
EOF

python3 generate_report.py
```

#### Í≤∞Í≥º ÏãúÍ∞ÅÌôî (ÏÑ†ÌÉùÏÇ¨Ìï≠)

```bash
# Í∞ÑÎã®Ìïú ÏÑ±Îä• Í∑∏ÎûòÌîÑ ÏÉùÏÑ± (gnuplot ÏÇ¨Ïö©)
if command -v gnuplot >/dev/null 2>&1; then
    echo "ÏÑ±Îä• Í∑∏ÎûòÌîÑ ÏÉùÏÑ± Ï§ë..."
    
    # ÏóÖÎ°úÎìú ÏÑ±Îä• Í∑∏ÎûòÌîÑ Îç∞Ïù¥ÌÑ∞ Ï§ÄÎπÑ
    echo "# ÌååÏùºÌÅ¨Í∏∞(MB) Ï≤òÎ¶¨Îüâ(MB/s)" > results/upload_performance.dat
    echo "0.001 $(echo "0.001 / $(grep Upload_1kb results/timing_results.csv | cut -d, -f2)" | bc -l)" >> results/upload_performance.dat
    echo "0.1 $(echo "0.1 / $(grep Upload_100kb results/timing_results.csv | cut -d, -f2)" | bc -l)" >> results/upload_performance.dat
    echo "1 $(echo "1 / $(grep Upload_1mb results/timing_results.csv | cut -d, -f2)" | bc -l)" >> results/upload_performance.dat
    
    # Í∑∏ÎûòÌîÑ ÏÉùÏÑ±
    gnuplot << EOF
set terminal png
set output 'results/upload_performance.png'
set title 'MinIO Upload Performance'
set xlabel 'File Size (MB)'
set ylabel 'Throughput (MB/s)'
set logscale x
plot 'results/upload_performance.dat' with linespoints title 'Upload Throughput'
EOF
    
    echo "ÏÑ±Îä• Í∑∏ÎûòÌîÑÍ∞Ä results/upload_performance.pngÏóê Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§."
else
    echo "gnuplotÏù¥ ÏÑ§ÏπòÎêòÏßÄ ÏïäÏïÑ Í∑∏ÎûòÌîÑ ÏÉùÏÑ±ÏùÑ Í±¥ÎÑàÎúÅÎãàÎã§."
fi
```

### 9Îã®Í≥Ñ: Í≤∞Í≥º ÏöîÏïΩ Î∞è Î∂ÑÏÑù

```bash
echo "=== ÏÑ±Îä• ÌÖåÏä§Ìä∏ Í≤∞Í≥º ÏöîÏïΩ ==="

# ÌÖåÏä§Ìä∏ Í≤∞Í≥º ÌååÏùºÎì§ ÌôïÏù∏
echo "ÏÉùÏÑ±Îêú Í≤∞Í≥º ÌååÏùºÎì§:"
ls -la results/

# Ï£ºÏöî Í≤∞Í≥º Ï∂úÎ†•
echo -e "\n=== Ï£ºÏöî ÏÑ±Îä• ÏßÄÌëú ==="
if [ -f results/timing_results.csv ]; then
    echo "Í∞ÄÏû• Îπ†Î•∏ ÏóÖÎ°úÎìú: $(grep Upload results/timing_results.csv | sort -t, -k2 -n | head -1)"
    echo "Í∞ÄÏû• ÎäêÎ¶∞ ÏóÖÎ°úÎìú: $(grep Upload results/timing_results.csv | sort -t, -k2 -nr | head -1)"
    echo "Í∞ÄÏû• Îπ†Î•∏ Îã§Ïö¥Î°úÎìú: $(grep Download results/timing_results.csv | sort -t, -k2 -n | head -1)"
    echo "Í∞ÄÏû• ÎäêÎ¶∞ Îã§Ïö¥Î°úÎìú: $(grep Download results/timing_results.csv | sort -t, -k2 -nr | head -1)"
fi

# Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ ÏöîÏïΩ
if [ -f results/resource_usage.csv ]; then
    echo -e "\n=== Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ ÏöîÏïΩ ==="
    echo "ÌèâÍ∑† CPU ÏÇ¨Ïö©Î•†: $(tail -n +2 results/resource_usage.csv | cut -d, -f2 | awk '{sum+=$1; count++} END {printf "%.1f%%", sum/count}')"
    echo "ÌèâÍ∑† Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Î•†: $(tail -n +2 results/resource_usage.csv | cut -d, -f3 | awk '{sum+=$1; count++} END {printf "%.1f%%", sum/count}')"
fi

echo -e "\n=== ÏÑ±Îä• ÏµúÏ†ÅÌôî Í∂åÏû•ÏÇ¨Ìï≠ ==="
echo "1. 100MB Ïù¥ÏÉÅ ÌååÏùºÏùÄ Multipart Upload ÌôúÏö©"
echo "2. Î≥ëÎ†¨ ÏóÖÎ°úÎìúÎ°ú Ï≤òÎ¶¨Îüâ Í∞úÏÑ† (5-10Í∞ú ÎèôÏãú Ïó∞Í≤∞)"
echo "3. SSD Ïä§ÌÜ†Î¶¨ÏßÄ ÏÇ¨Ïö©ÏúºÎ°ú I/O ÏÑ±Îä• Ìñ•ÏÉÅ"
echo "4. ÎÑ§Ìä∏ÏõåÌÅ¨ ÎåÄÏó≠Ìè≠ ÏµúÏ†ÅÌôî"
echo "5. Ï†ïÍ∏∞Ï†ÅÏù∏ ÏÑ±Îä• Î™®ÎãàÌÑ∞ÎßÅ Ïã§Ïãú"
```

## üéØ Ïã§Ïäµ ÏôÑÎ£å Ï≤¥ÌÅ¨Î¶¨Ïä§Ìä∏

- [ ] Îã§ÏñëÌïú ÌååÏùº ÌÅ¨Í∏∞Î≥Ñ ÏÑ±Îä• Ï∏°Ï†ï ÏôÑÎ£å
- [ ] ÏàúÏ∞® vs Î≥ëÎ†¨ ÏóÖÎ°úÎìú ÏÑ±Îä• ÎπÑÍµê ÏôÑÎ£å
- [ ] ÎèôÏãú Ïó∞Í≤∞ ÏàòÎ≥Ñ ÏÑ±Îä• ÌÖåÏä§Ìä∏ ÏôÑÎ£å
- [ ] ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ Î™®ÎãàÌÑ∞ÎßÅ ÏôÑÎ£å
- [ ] MinIO ÏÑúÎ≤Ñ Î©îÌä∏Î¶≠ ÏàòÏßë ÏôÑÎ£å
- [ ] ÏÑ±Îä• ÏµúÏ†ÅÌôî ÏÑ§Ï†ï ÌÖåÏä§Ìä∏ ÏôÑÎ£å
- [ ] Ï¢ÖÌï© ÏÑ±Îä• Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ± ÏôÑÎ£å

## üßπ Ï†ïÎ¶¨

Ïã§ÏäµÏù¥ ÏôÑÎ£åÎêòÎ©¥ ÌÖåÏä§Ìä∏ ÌååÏùºÎì§ÏùÑ Ï†ïÎ¶¨Ìï©ÎãàÎã§:

```bash
# ÏÑ±Îä• ÌÖåÏä§Ìä∏ ÎîîÎ†âÌÜ†Î¶¨Î°ú Ïù¥Îèô
cd /home/luke/minio_lab_k8s

# ÌÖåÏä§Ìä∏ ÌååÏùº Ï†ïÎ¶¨
rm -rf performance-test

# MinIO ÌÖåÏä§Ìä∏ Í∞ùÏ≤¥ Ï†ïÎ¶¨ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
mc rm --recursive local/test-bucket/ --force
```

## üìö Îã§Ïùå Îã®Í≥Ñ

Ïù¥Ï†ú **Lab 6: ÏÇ¨Ïö©Ïûê Î∞è Í∂åÌïú Í¥ÄÎ¶¨**Î°ú ÏßÑÌñâÌïòÏó¨ MinIOÏùò Î≥¥Ïïà Í∏∞Îä•ÏùÑ ÌïôÏäµÌï¥Î≥¥ÏÑ∏Ïöî.

## üí° ÌïµÏã¨ Ìè¨Ïù∏Ìä∏

1. **ÌååÏùº ÌÅ¨Í∏∞**Ïóê Îî∞Îùº ÏÑ±Îä• ÌäπÏÑ±Ïù¥ ÌÅ¨Í≤å Îã¨ÎùºÏßëÎãàÎã§
2. **Î≥ëÎ†¨ Ï≤òÎ¶¨**Îäî Ï†ÑÏ≤¥ Ï≤òÎ¶¨ÎüâÏùÑ ÌÅ¨Í≤å Í∞úÏÑ†ÏãúÌÇµÎãàÎã§
3. **ÏãúÏä§ÌÖú Î¶¨ÏÜåÏä§** Î™®ÎãàÌÑ∞ÎßÅÏùÄ Î≥ëÎ™© ÏßÄÏ†ê ÌååÏïÖÏóê ÌïÑÏàòÏûÖÎãàÎã§
4. **ÎÑ§Ìä∏ÏõåÌÅ¨ÏôÄ Ïä§ÌÜ†Î¶¨ÏßÄ I/O**Í∞Ä Ï£ºÏöî ÏÑ±Îä• Í≤∞Ï†ï ÏöîÏÜåÏûÖÎãàÎã§
5. **Ï†ïÍ∏∞Ï†ÅÏù∏ ÏÑ±Îä• ÌÖåÏä§Ìä∏**Î°ú ÏãúÏä§ÌÖú ÏÉÅÌÉúÎ•º Ï†êÍ≤ÄÌï¥Ïïº Ìï©ÎãàÎã§

---

**üîó Í¥ÄÎ†® Î¨∏ÏÑú:**
- [LAB-05-CONCEPTS.md](LAB-05-CONCEPTS.md) - ÏÑ±Îä• ÌÖåÏä§Ìä∏ ÏÉÅÏÑ∏ Í∞úÎÖê (ÏòàÏ†ï)
- [LAB-06-GUIDE.md](LAB-06-GUIDE.md) - Îã§Ïùå Lab Guide: ÏÇ¨Ïö©Ïûê Î∞è Í∂åÌïú Í¥ÄÎ¶¨
